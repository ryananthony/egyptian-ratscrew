var player = require('player.js');

function flip(hand) {
    var playedCard = hand.shift()
    return [playedCard, hand]
}

function deal(deckArray,numPlayers) {
    // deck as parameter since can play with Jokers
    var players = new Array(numPlayers)
    var playerDealt = 0

    //since we're 'shifting', need to save initial length in variable
    var deckSize = deckArray.length

    // extra cards become initial game card pile to keep hands even
    var initialPile = []

    for (i=0;i<deckSize;i++) {
	// if we have dealt to all players, start over
	if (playerDealt > players.length - 1) { playerDealt = 0 }
	if (!players[playerDealt]) 
	{ 
	    players[playerDealt] = new player.Player;	    
	}
	if (playerDealt == 0 && deckArray.length < numPlayers) 
	{ 
	    initialPile = deckArray; 
	    break; 
	}
	
	players[playerDealt].hand.push(deckArray.shift())
	playerDealt++
    }
    
    return [players, initialPile]
}

exports.Flip = flip
exports.Deal = deal